<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LegalForge - Professional Edition</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&family=Lora:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['"Plus Jakarta Sans"', 'sans-serif'],
                        serif: ['"Lora"', 'serif'],
                    },
                    colors: { indigo: { 600: '#4F46E5' }, emerald: { 600: '#059669' } }
                }
            }
        }
    </script>
    
    <style>
        @media print { .no-print { display: none !important; } body { background: white; } @page { margin: 20mm; } }
        .avoid-break { page-break-inside: avoid; break-inside: avoid; }
        .legal-text { text-align: justify; text-justify: inter-word; line-height: 1.6; }
        .custom-scrollbar::-webkit-scrollbar { width: 6px; }
        .custom-scrollbar::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scrollbar::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }
    </style>
</head>
<body class="bg-white text-slate-800 font-sans h-screen flex flex-col overflow-hidden">

    <header class="flex-none bg-white border-b border-gray-200 z-50 no-print px-6 py-4 flex items-center justify-between">
        <div class="flex items-center gap-3">
            <div class="bg-indigo-600 text-white p-2 rounded-lg">
                <i class="fa-solid fa-file-signature text-lg"></i>
            </div>
            <div>
                <h1 class="text-xl font-bold tracking-tight text-gray-900">LegalForge</h1>
                <p class="text-xs text-gray-500">Contratos de Alta Fidelidade</p>
            </div>
        </div>
        
        <div class="flex items-center gap-3">
            <select id="modelSelector" onchange="loadModel()" class="bg-slate-50 border border-gray-200 text-sm rounded-lg p-2.5 focus:ring-indigo-500 focus:border-indigo-500 w-64">
                <option value="servicos">Prestação de Serviços (Completo)</option>
                <option value="aluguel">Locação de Imóvel Residencial</option>
                <option value="nda">Acordo de Confidencialidade (NDA)</option>
            </select>
            <button onclick="generatePDF()" class="bg-slate-900 hover:bg-black text-white font-medium text-sm py-2.5 px-5 rounded-lg transition-all flex items-center gap-2">
                <i class="fa-solid fa-download"></i> Baixar PDF
            </button>
        </div>
    </header>

    <main class="flex-grow flex overflow-hidden">
        
        <aside class="w-1/3 min-w-[380px] max-w-[480px] bg-slate-50 border-r border-gray-200 overflow-y-auto p-6 no-print custom-scrollbar">
            
            <div class="space-y-6">
                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm">
                    <h3 class="text-xs font-bold text-indigo-600 uppercase mb-4 border-b pb-2 flex items-center justify-between">
                        <span><i class="fa-solid fa-user-tie mr-2"></i>Contratante / Locador</span>
                    </h3>
                    <div class="grid grid-cols-1 gap-3">
                        <input type="text" id="in_nome_1" placeholder="Nome Completo / Razão Social" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                        <div class="grid grid-cols-2 gap-2">
                            <input type="text" id="in_doc_1" placeholder="CPF / CNPJ" oninput="update()" class="rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                            <input type="text" id="in_estado_1" placeholder="Estado Civil / Tipo Empresa" oninput="update()" class="rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                        </div>
                        <input type="text" id="in_prof_1" placeholder="Profissão / Ramo de Atividade" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                        <input type="text" id="in_end_1" placeholder="Endereço Residencial/Sede Completo" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                    </div>
                </div>

                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm">
                    <h3 class="text-xs font-bold text-emerald-600 uppercase mb-4 border-b pb-2 flex items-center justify-between">
                        <span><i class="fa-solid fa-briefcase mr-2"></i>Contratado / Locatário</span>
                    </h3>
                    <div class="grid grid-cols-1 gap-3">
                        <input type="text" id="in_nome_2" placeholder="Nome Completo / Razão Social" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                        <div class="grid grid-cols-2 gap-2">
                            <input type="text" id="in_doc_2" placeholder="CPF / CNPJ" oninput="update()" class="rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                            <input type="text" id="in_estado_2" placeholder="Estado Civil" oninput="update()" class="rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                        </div>
                        <input type="text" id="in_prof_2" placeholder="Profissão" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                        <input type="text" id="in_end_2" placeholder="Endereço Completo" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm focus:ring-1 focus:ring-indigo-500 outline-none">
                    </div>
                </div>

                <div class="bg-white p-4 rounded-xl border border-gray-200 shadow-sm">
                    <h3 class="text-xs font-bold text-slate-600 uppercase mb-4 border-b pb-2">
                        <i class="fa-solid fa-coins mr-2"></i>Condições e Pagamento
                    </h3>
                    <div class="space-y-3">
                        <div class="grid grid-cols-2 gap-2">
                            <input type="text" id="in_valor" placeholder="Valor (R$)" onkeyup="formatCurrency(this)" class="rounded border-gray-200 bg-gray-50 p-2 text-sm font-mono outline-none focus:ring-1 focus:ring-indigo-500">
                            <input type="text" id="in_prazo" placeholder="Prazo (ex: 12 meses)" oninput="update()" class="rounded border-gray-200 bg-gray-50 p-2 text-sm outline-none focus:ring-1 focus:ring-indigo-500">
                        </div>
                        <input type="text" id="in_banco" placeholder="Dados Bancários para Depósito" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm outline-none focus:ring-1 focus:ring-indigo-500">
                        <textarea id="in_objeto" placeholder="Descrição detalhada do objeto..." rows="3" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm outline-none focus:ring-1 focus:ring-indigo-500"></textarea>
                        <input type="text" id="in_cidade" placeholder="Cidade da Assinatura" oninput="update()" class="w-full rounded border-gray-200 bg-gray-50 p-2 text-sm outline-none focus:ring-1 focus:ring-indigo-500">
                    </div>
                </div>
            </div>
        </aside>

        <section class="flex-grow bg-white overflow-y-auto flex justify-center p-12 custom-scrollbar">
            <div id="contractContent" class="w-full max-w-[210mm] text-gray-900">
                <div id="documentBody" class="font-serif legal-text text-[11pt] leading-relaxed">
                    </div>
            </div>
        </section>
    </main>

    <script>
        // Formatação BRL
        function formatCurrency(i) {
            let v = i.value.replace(/\D/g, '');
            if(v === '') { i.value = ''; update(); return; }
            v = (parseInt(v) / 100).toFixed(2) + '';
            v = v.replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
            i.value = 'R$ ' + v;
            update();
        }

        const models = {
            servicos: {
                title: "CONTRATO DE PRESTAÇÃO DE SERVIÇOS",
                clauses: [
                    { t: "1. QUALIFICAÇÃO", c: "<strong>CONTRATANTE:</strong> [N1], [E1], [P1], inscrito no CPF/CNPJ sob o nº [D1], residente e domiciliado em [R1].<br><strong>CONTRATADO:</strong> [N2], [E2], [P2], inscrito no CPF/CNPJ sob o nº [D2], residente e domiciliado em [R2]." },
                    { t: "2. OBJETO", c: "O CONTRATADO prestará os seguintes serviços: [OBJ]." },
                    { t: "3. PREÇO E PAGAMENTO", c: "Pelo serviço, a CONTRATANTE pagará o valor de [VAL]. O pagamento será efetuado via [BNC]." },
                    { t: "4. VIGÊNCIA", c: "O presente instrumento terá vigência pelo prazo de [PRZ]." }
                ]
            },
            aluguel: {
                title: "CONTRATO DE LOCAÇÃO DE IMÓVEL RESIDENCIAL",
                clauses: [
                    { t: "1. PARTES", c: "<strong>LOCADOR:</strong> [N1], [E1], [P1], portador do CPF/CNPJ [D1], residente em [R1].<br><strong>LOCATÁRIO:</strong> [N2], [E2], [P2], portador do CPF/CNPJ [D2], residente em [R2]." },
                    { t: "2. OBJETO", c: "O objeto deste contrato é a locação do imóvel situado em: [OBJ]." },
                    { t: "3. ALUGUEL E ENCARGOS", c: "O valor mensal do aluguel é de [VAL]. O pagamento deverá ser feito mensalmente através de [BNC]." },
                    { t: "4. PRAZO", c: "A locação terá o prazo determinado de [PRZ], iniciando-se na data desta assinatura." }
                ]
            },
            nda: {
                title: "ACORDO DE CONFIDENCIALIDADE (NDA)",
                clauses: [
                    { t: "1. PARTES", c: "<strong>REVELADORA:</strong> [N1], [E1], residente em [R1].<br><strong>RECEPTORA:</strong> [N2], [E2], residente em [R2]." },
                    { t: "2. OBJETO", c: "O sigilo refere-se às informações de: [OBJ]." },
                    { t: "3. MULTA", c: "O descumprimento deste acordo acarretará multa indenizatória de [VAL]." },
                    { t: "4. PRAZO DE SIGILO", c: "As obrigações de confidencialidade perdurarão por [PRZ]." }
                ]
            }
        };

        function update() {
            const map = {
                '[N1]': document.getElementById('in_nome_1').value || "________",
                '[D1]': document.getElementById('in_doc_1').value || "________",
                '[E1]': document.getElementById('in_estado_1').value || "________",
                '[P1]': document.getElementById('in_prof_1').value || "________",
                '[R1]': document.getElementById('in_end_1').value || "________",
                '[N2]': document.getElementById('in_nome_2').value || "________",
                '[D2]': document.getElementById('in_doc_2').value || "________",
                '[E2]': document.getElementById('in_estado_2').value || "________",
                '[P2]': document.getElementById('in_prof_2').value || "________",
                '[R2]': document.getElementById('in_end_2').value || "________",
                '[VAL]': document.getElementById('in_valor').value || "________",
                '[PRZ]': document.getElementById('in_prazo').value || "________",
                '[BNC]': document.getElementById('in_banco').value || "________",
                '[OBJ]': document.getElementById('in_objeto').value || "________"
            };

            const key = document.getElementById('modelSelector').value;
            const model = models[key];
            const cid = document.getElementById('in_cidade').value || "Cidade";
            const dateStr = `${cid}, ${new Date().toLocaleDateString('pt-BR', {day:'numeric', month:'long', year:'numeric'})}`;

            let body = `<div class="text-center mb-12"><h1 class="text-xl font-bold uppercase border-b-2 border-black inline-block pb-1">${model.title}</h1></div>`;
            model.clauses.forEach(cl => {
                body += `<div class="mb-6 avoid-break"><h3 class="font-bold text-sm uppercase mb-1">${cl.t}</h3><p>${cl.c}</p></div>`;
            });

            body += `
                <div class="mt-20 avoid-break">
                    <p class="text-right mb-16">${dateStr}.</p>
                    <div class="grid grid-cols-2 gap-10">
                        <div class="text-center"><div class="border-t border-black pt-1"></div><p class="font-bold text-xs uppercase">${map['[N1]']}</p><p class="text-[9pt]">CPF/CNPJ: ${map['[D1]']}</p></div>
                        <div class="text-center"><div class="border-t border-black pt-1"></div><p class="font-bold text-xs uppercase">${map['[N2]']}</p><p class="text-[9pt]">CPF/CNPJ: ${map['[D2]']}</p></div>
                    </div>
                </div>`;

            for (let [k, v] of Object.entries(map)) { body = body.split(k).join(`<span class="text-black font-semibold">${v}</span>`); }
            document.getElementById('documentBody').innerHTML = body;
        }

        function loadModel() { update(); }
        function generatePDF() {
            const el = document.getElementById('contractContent');
            const opt = { margin: [15, 20, 15, 20], filename: 'contrato.pdf', html2canvas: { scale: 2 }, jsPDF: { unit: 'mm', format: 'a4' } };
            html2pdf().set(opt).from(el).save();
        }
        window.onload = update;
    </script>
</body>
</html>